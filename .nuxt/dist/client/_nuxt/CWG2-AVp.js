import{m as k,u as B,c as I,i as A,b as q,t as T,w as F,d as V,e as $}from"./NmKlcnzH.js";import{Q as f,e as R,k as O,M as Y,a5 as j,A as z,i as D,B as K,v as N}from"./BiiBGYRd.js";function te(e={}){const{inheritAttrs:t=!0}=e,s=f(),v=R({setup(l,{slots:d}){return()=>{s.value=d.default}}}),i=R({inheritAttrs:t,props:e.props,setup(l,{attrs:d,slots:u}){return()=>{var n;s.value;const o=(n=s.value)==null?void 0:n.call(s,{...e.props==null?Q(d):l,$slots:u});return t&&(o==null?void 0:o.length)===1?o[0]:o}}});return k({define:v,reuse:i},[v,i])}function Q(e){const t={};for(const s in e)t[I(s)]=e[s];return t}const H=A?window:void 0,L=A?window.navigator:void 0;function P(e){var t;const s=Y(e);return(t=s==null?void 0:s.$el)!=null?t:s}function M(...e){const t=[],s=()=>{t.forEach(u=>u()),t.length=0},v=(u,n,o,r)=>(u.addEventListener(n,o,r),()=>u.removeEventListener(n,o,r)),i=O(()=>{const u=T(Y(e[0])).filter(n=>n!=null);return u.every(n=>typeof n!="string")?u:void 0}),l=F(()=>{var u,n;return[(n=(u=i.value)==null?void 0:u.map(o=>P(o)))!=null?n:[H].filter(o=>o!=null),T(Y(i.value?e[1]:e[0])),T(D(i.value?e[2]:e[1])),Y(i.value?e[3]:e[2])]},([u,n,o,r])=>{if(s(),!(u!=null&&u.length)||!(n!=null&&n.length)||!(o!=null&&o.length))return;const m=$(r)?{...r}:r;t.push(...u.flatMap(y=>n.flatMap(g=>o.map(h=>v(y,g,h,m)))))},{flush:"post"}),d=()=>{l(),s()};return V(s),d}function U(){const e=f(!1),t=z();return t&&j(()=>{e.value=!0},t),e}function _(e){const t=U();return O(()=>(t.value,!!e()))}function W(e,t={}){const{controls:s=!1,navigator:v=L}=t,i=_(()=>v&&"permissions"in v),l=f(),d=typeof e=="string"?{name:e}:e,u=f(),n=()=>{var r,m;u.value=(m=(r=l.value)==null?void 0:r.state)!=null?m:"prompt"};M(l,"change",n,{passive:!0});const o=q(async()=>{if(i.value){if(!l.value)try{l.value=await v.permissions.query(d)}catch{l.value=void 0}finally{n()}if(s)return K(l.value)}});return o(),s?{state:u,isSupported:i,query:o}:u}function ne(e={}){const{navigator:t=L,read:s=!1,source:v,copiedDuring:i=1500,legacy:l=!1}=e,d=_(()=>t&&"clipboard"in t),u=W("clipboard-read"),n=W("clipboard-write"),o=O(()=>d.value||l),r=f(""),m=f(!1),y=B(()=>m.value=!1,i,{immediate:!1});async function g(){let c=!(d.value&&w(u.value));if(!c)try{r.value=await t.clipboard.readText()}catch{c=!0}c&&(r.value=E())}o.value&&s&&M(["copy","cut"],g,{passive:!0});async function h(c=Y(v)){if(o.value&&c!=null){let p=!(d.value&&w(n.value));if(!p)try{await t.clipboard.writeText(c)}catch{p=!0}p&&b(c),r.value=c,m.value=!0,y.start()}}function b(c){const p=document.createElement("textarea");p.value=c??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function E(){var c,p,x;return(x=(p=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:p.toString())!=null?x:""}function w(c){return c==="granted"||c==="prompt"}return{isSupported:o,text:r,copied:m,copy:h}}const G={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof MouseEvent?[e.movementX,e.movementY]:null};function J(e={}){const{type:t="page",touch:s=!0,resetOnTouchEnds:v=!1,initialValue:i={x:0,y:0},window:l=H,target:d=l,scroll:u=!0,eventFilter:n}=e;let o=null,r=0,m=0;const y=f(i.x),g=f(i.y),h=f(null),b=typeof t=="function"?t:G[t],E=a=>{const X=b(a);o=a,X&&([y.value,g.value]=X,h.value="mouse"),l&&(r=l.scrollX,m=l.scrollY)},w=a=>{if(a.touches.length>0){const X=b(a.touches[0]);X&&([y.value,g.value]=X,h.value="touch")}},c=()=>{if(!o||!l)return;const a=b(o);o instanceof MouseEvent&&a&&(y.value=a[0]+l.scrollX-r,g.value=a[1]+l.scrollY-m)},p=()=>{y.value=i.x,g.value=i.y},x=n?a=>n(()=>E(a),{}):a=>E(a),C=n?a=>n(()=>w(a),{}):a=>w(a),S=n?()=>n(()=>c(),{}):()=>c();if(d){const a={passive:!0};M(d,["mousemove","dragover"],x,a),s&&t!=="movement"&&(M(d,["touchstart","touchmove"],C,a),v&&M(d,"touchend",p,a)),u&&t==="page"&&M(l,"scroll",S,a)}return{x:y,y:g,sourceType:h}}function oe(e,t={}){const{handleOutside:s=!0,window:v=H}=t,i=t.type||"page",{x:l,y:d,sourceType:u}=J(t),n=f(e??(v==null?void 0:v.document.body)),o=f(0),r=f(0),m=f(0),y=f(0),g=f(0),h=f(0),b=f(!0);let E=()=>{};return v&&(E=N([n,l,d],()=>{const w=P(n);if(!w||!(w instanceof Element))return;const{left:c,top:p,width:x,height:C}=w.getBoundingClientRect();m.value=c+(i==="page"?v.pageXOffset:0),y.value=p+(i==="page"?v.pageYOffset:0),g.value=C,h.value=x;const S=l.value-m.value,a=d.value-y.value;b.value=x===0||C===0||S<0||a<0||S>x||a>C,(s||!b.value)&&(o.value=S,r.value=a)},{immediate:!0}),M(document,"mouseleave",()=>b.value=!0,{passive:!0})),{x:l,y:d,sourceType:u,elementX:o,elementY:r,elementPositionX:m,elementPositionY:y,elementHeight:g,elementWidth:h,isOutside:b,stop:E}}export{ne as a,te as c,oe as u};
