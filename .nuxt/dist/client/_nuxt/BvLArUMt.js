import{e as N,f as S,i as x}from"./Bn2h5X3h.js";import{s as d,k as O,A as T,v as E,W as U,S as C,e as $,$ as j,z as w}from"./BiiBGYRd.js";import{r as k}from"./DkPbciIt.js";function q(){const i=T(),e=d(),u=O(()=>{var t,s;return["#text","#comment"].includes((t=e.value)==null?void 0:t.$el.nodeName)?(s=e.value)==null?void 0:s.$el.nextElementSibling:N(e)}),o=Object.assign({},i.exposed),c={};for(const t in i.props)Object.defineProperty(c,t,{enumerable:!0,configurable:!0,get:()=>i.props[t]});if(Object.keys(o).length>0)for(const t in o)Object.defineProperty(c,t,{enumerable:!0,configurable:!0,get:()=>o[t]});Object.defineProperty(c,"$el",{enumerable:!0,configurable:!0,get:()=>i.vnode.el}),i.exposed=c;function l(t){e.value=t,t&&(Object.defineProperty(c,"$el",{enumerable:!0,configurable:!0,get:()=>t instanceof Element?t:t.$el}),i.exposed=c)}return{forwardRef:l,currentRef:e,currentElement:u}}function F(i,e){const u=d(i);function o(l){return e[u.value][l]??u.value}return{state:u,dispatch:l=>{u.value=o(l)}}}function D(i,e){var M;const u=d({}),o=d("none"),c=d(i),l=i.value?"mounted":"unmounted";let t;const s=((M=e.value)==null?void 0:M.ownerDocument.defaultView)??S,{state:v,dispatch:f}=F(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),m=n=>{var a;if(x){const h=new CustomEvent(n,{bubbles:!1,cancelable:!1});(a=e.value)==null||a.dispatchEvent(h)}};E(i,async(n,a)=>{var y;const h=a!==n;if(await C(),h){const g=o.value,p=A(e.value);n?(f("MOUNT"),m("enter"),p==="none"&&m("after-enter")):p==="none"||p==="undefined"||((y=u.value)==null?void 0:y.display)==="none"?(f("UNMOUNT"),m("leave"),m("after-leave")):a&&g!==p?(f("ANIMATION_OUT"),m("leave")):(f("UNMOUNT"),m("after-leave"))}},{immediate:!0});const r=n=>{const a=A(e.value),h=a.includes(n.animationName),y=v.value==="mounted"?"enter":"leave";if(n.target===e.value&&h&&(m(`after-${y}`),f("ANIMATION_END"),!c.value)){const g=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",t=s==null?void 0:s.setTimeout(()=>{var p;((p=e.value)==null?void 0:p.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=g)})}n.target===e.value&&a==="none"&&f("ANIMATION_END")},b=n=>{n.target===e.value&&(o.value=A(e.value))},I=E(e,(n,a)=>{n?(u.value=getComputedStyle(n),n.addEventListener("animationstart",b),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r)):(f("ANIMATION_END"),t!==void 0&&(s==null||s.clearTimeout(t)),a==null||a.removeEventListener("animationstart",b),a==null||a.removeEventListener("animationcancel",r),a==null||a.removeEventListener("animationend",r))},{immediate:!0}),P=E(v,()=>{const n=A(e.value);o.value=v.value==="mounted"?n:"none"});return U(()=>{I(),P()}),{isPresent:O(()=>["mounted","unmountSuspended"].includes(v.value))}}function A(i){return i&&getComputedStyle(i).animationName||"none"}const z=$({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(i,{slots:e,expose:u}){var f;const{present:o,forceMount:c}=j(i),l=d(),{isPresent:t}=D(o,l);u({present:t});let s=e.default({present:t.value});s=k(s||[]);const v=T();if(s&&(s==null?void 0:s.length)>1){const m=(f=v==null?void 0:v.parent)!=null&&f.type.name?`<${v.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${m}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(r=>`  - ${r}`).join(`
`)].join(`
`))}return()=>c.value||o.value||t.value?w(e.default({present:t.value})[0],{ref:m=>{const r=N(m);return typeof(r==null?void 0:r.hasAttribute)>"u"||(r!=null&&r.hasAttribute("data-reka-popper-content-wrapper")?l.value=r.firstElementChild:l.value=r),r}}):null}});export{z as P,q as u};
